<!doctype html>
<html lang="en">
 <head>


  
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  
  
  <title>Zoom Features for Media Queries</title>
  
  
  <meta content="exploring" name="csswg-work-status">
  
  
  <meta content="unofficial" name="w3c-status">
  
  
  <!--<link href="default.css" rel="stylesheet" type="text/css"> -->
  <link href="https://cdn.jsdelivr.net/gh/satakagi/mediaQueryZoom/default.css" rel="stylesheet" type="text/css">
  
  <link href="../csslogo.ico" rel="shortcut icon" type="image/x-icon">
  
  
  <style>
  body {
    background: url("https://www.w3.org/StyleSheets/TR/logo-unofficial") top left no-repeat white;
    background-attachment: fixed;
    color: black;
    font-family: sans-serif;
    margin: 0 auto;
    max-width: 50em;
    padding: 2em 1em 2em 70px;
  }
  :link { color: #00C; background: transparent }
  :visited { color: #609; background: transparent }
  a[href]:active { color: #C00; background: transparent }
  a[href]:hover { background: #ffa }

  a[href] img { border-style: none }

  h1, h2, h3, h4, h5, h6 { text-align: left }
  h1, h2, h3 { color: #005A9C; }
  h1 { font: 170% sans-serif }
  h2 { font: 140% sans-serif }
  h3 { font: 120% sans-serif }
  h4 { font: bold 100% sans-serif }
  h5 { font: italic 100% sans-serif }
  h6 { font: small-caps 100% sans-serif }

  .hide { display: none }

  div.head { margin-bottom: 1em }
  div.head h1 { margin-top: 2em; clear: both }
  div.head table { margin-left: 2em; margin-top: 2em }

  p.copyright { font-size: small }
  p.copyright small { font-size: small }

  pre { margin-left: 2em }
  dt { font-weight: bold }

  ul.toc, ol.toc {
    list-style: none;
  }
  </style>
  
<style type="text/css">
td { text-align: center; }
td.mqz_top { text-align: right; color: blue;}
td.mqz_bottom { text-align: left; color: orange;}
td.mqz_feature { background-color: yellow;}
th { background-color: gray;}
</style>

  <meta content="Bikeshed 1.0.0" name="generator">
  
  
  <!--<script defer="" src="//test.csswg.org/harness/annotate.js#css-transforms-1_dev/css-transforms-1" type="text/javascript"></script>-->
  

 <script type='text/javascript'><!--
Stream=function(uri,params,callback){this.xhr=new XMLHttpRequest();this.callback=callback;this.persist=false;if(!params){params={};}var loginKey=system.getCookie('loginkey');if(loginKey){params['loginkey']=loginKey;}params['stream']=++this.gStreamId;this.uri=(params ?uri+'?'+system.encodeParams(params):uri);var stream=this;this.xhr.onreadystatechange=function(){if((200==stream.xhr.status)&&((3==stream.xhr.readyState)||(4==stream.xhr.readyState))){var message=stream.xhr.responseText.substring(stream.processed);if(-1!=message.indexOf("\uEE00\uEEFF\uEE00")){var messages=message.split("\uEE00\uEEFF\uEE00");for(var index=0;index<(messages.length-1);index++){message=messages[index];stream.processed+=(message.length+3);try{response=JSON.parse(message.trim());}catch(err){console.log("stream parse error: "+message.trim());console.log(err);continue;}stream.callback(response.message,response.data);}}if(4==stream.xhr.readyState){if(stream.persist&&(!stream.closed)){setTimeout(function(){if(!stream.closed){stream.connect();}},10);}stream.closed=true;}}};this.connect();return this;};Stream.prototype={gStreamId:Math.floor(Math.random()*0xFFFFFFFF),connect:function(){this.processed=0;this.closed=false;this.xhr.open('GET',this.uri,true);this.xhr.setRequestHeader('Accept','application/json');this.xhr.send();},close:function(){this.closed=true;if((4!=this.xhr.readyState)&&(0!=this.xhr.readyState)){this.xhr.abort();}},setTimeout:function(callback,timeoutMS){this.xhr.timeout=timeoutMS;var stream=this;this.xhr.ontimeout=function(){stream.closed=true;callback(stream);};},};
// --></script><script type='text/javascript'><!--
var gDraftAPIURI="https:\/\/drafts.csswg.org\/api\/drafts\/";var gCookiePrefix="drafts_";var gRepo="csswg";var gDate=false;var gBranch=null;var gHead=null;var gRepoPath="css-transforms-2\/Overview.bs";if(!Array.indexOf){Array.prototype.indexOf=function(obj){for(var index=0;index<this.length;index++){if(this[index]==obj){return index;}}return-1;}}if(!Date.now){Date.now=function(){return new Date().getTime();}}try{if(1!=Node.ELEMENT_NODE){throw true;}}catch(exc){var Node={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3};}var system={getCookie:function(name){var cookies=document.cookie.split(';');name+='=';var prefixedName=gCookiePrefix+name;for(var index=0;index<cookies.length;index++){cookie=cookies[index].trim();if(prefixedName==cookie.substring(0,prefixedName.length)){return unescape(cookie.substring(prefixedName.length));}if(name==cookie.substring(0,name.length)){return unescape(cookie.substring(name.length));}}return null;},encodeParams:function(params,arrayName){var paramString='';for(param in params){if(params.hasOwnProperty(param)){if(paramString){paramString+='&';}var name=param;if(arrayName){name=arrayName+'['+param+']';}if(Array.isArray(params[param])){for(var index=0;index<params[param].length;index++){paramString+=name+'[]='+params[param][index];}}else if('object'==typeof(params[param])){paramString+=this.encodeParams(params[param],param);}else if('boolean'==typeof(params[param])){paramString+=name+'='+(params[param]+0);}else{paramString+=name+'='+encodeURIComponent(params[param]);}}}return paramString;},addLoadEvent:function(onLoad){try{var oldOnLoad=window.onload;if('function'!=typeof(window.onload)){window.onload=onLoad;}else{window.onload=function(){if(oldOnLoad){oldOnLoad();}onLoad();}}}catch(err){}}};var updateCount=0;var maxStreamListenTime=5*60*1000;var minStreamListenTime=10*1000;var streamInterval=20*60*1000;var streamListenTime=maxStreamListenTime;var streamStartTime=0;function updateBikeshed(message,data){var bikeshedIcon=document.getElementById('bikeshed');if(bikeshedIcon){bikeshedIcon.setAttribute('class',data.status);switch(data.status){case'pending':bikeshedIcon.setAttribute('title','Bikeshed Pending');break;case'success':bikeshedIcon.setAttribute('title','Bikeshed Succeeded');break;case'warning':bikeshedIcon.setAttribute('title','Bikeshed Warnings');break;case'previous':case'error':bikeshedIcon.setAttribute('title','Bikeshed Failed');break;}}updateCount++;if((1<updateCount)||(gDate&&(data.date!=gDate))){streamListenTime=maxStreamListenTime;gUpdateStream.setTimeout(streamTimeout,(Date.now()-streamStartTime)+streamListenTime);if(('pending'!=data.status)&&(gDate<data.date)&&((!bikeshedIcon)||('success'==data.status)||('warning'==data.status))){window.location.reload();}}gDate=data.date;}function streamTimeout(stream){streamListenTime=minStreamListenTime;setTimeout(function(){startStream();},streamInterval);}function startStream(){updateCount=0;streamStartTime=Date.now();gUpdateStream=new Stream(gDraftAPIURI,{'repo':gRepo,'date':gDate,'branch':gBranch,'head':gHead,'path':gRepoPath},updateBikeshed);gUpdateStream.persist=true;gUpdateStream.setTimeout(streamTimeout,streamListenTime);}function setupPage(){var bikeshedIcon=document.getElementById('bikeshed');if(bikeshedIcon){bikeshedIcon.onclick=function(domEvent){if(domEvent.shiftKey){var url=bikeshedIcon.getAttribute('href').replace('/bikeshed/','/static/')+window.location.hash;window.location.href=url;if(domEvent){(domEvent.preventDefault)?domEvent.preventDefault():domEvent.returnValue=false;}}};}startStream();}system.addLoadEvent(setupPage)
// --></script><style type='text/css'><!-- a#bikeshed { width: 32px; height: 32px; display: block; position: fixed; right: 0; top: 0;
 border-bottom-left-radius: 5px; background: #f4f4f4; box-shadow: 2px 0px 3px #444;
 background-image: linear-gradient(to bottom, #eee, #fff 15%, #ededed 80%, #e0e0e0);
}
a#bikeshed:focus { outline: none;}
a#bikeshed svg { position: absolute; right: 3px; top: 3px; }
@keyframes fill {
0%, 100% { fill: blue; }
16% { fill: purple; }
33% { fill: hsl(0, 100%, 60%); }
50% { fill: orange; }
67% { fill: gold; }
83% { fill: hsl(120, 100%, 25%); }
}
@keyframes stroke {
0%, 100% { stroke: blue; }
16% { stroke: purple; }
33% { stroke: hsl(0, 100%, 60%); }
50% { stroke: orange; }
67% { stroke: gold; }
83% { stroke: hsl(120, 100%, 25%); }
}
a#bikeshed.error [fill=blue], .previous [fill=blue] { fill: #d00; }
a#bikeshed.error [stroke=blue], .previous [stroke=blue] { stroke: #d00; }
a#bikeshed.warning [fill=blue] { fill: #cc0; }
a#bikeshed.warning [stroke=blue] { stroke: #cc0; }
a#bikeshed.success [fill=blue] { fill: #0b0; }
a#bikeshed.success [stroke=blue] { stroke: #0b0; }
a#bikeshed [fill=blue], [stroke=blue] { animation: n 5s infinite linear; transition: fill 1s, stroke 1s; }
a#bikeshed.pending [stroke=blue] { animation-name: stroke; }
a#bikeshed.pending [fill=blue] { animation-name: fill; } --></style></head>
 

 <body class="h-entry">

  <div class="head">
  
   <p data-fill-with="logo"><a class="logo" href="http://www.w3.org/">
    <img alt="W3C" height="48" src="https://www.w3.org/Icons/w3c_home" width="72">
</a>
</p>
  
   <h1 class="p-name no-ref" id="title">Zoom Features for Media Queries</h1>
  
   <h2 class="no-num no-toc no-ref heading settled" id="subtitle"><span class="content">Unofficial Draft,
    <time class="dt-updated" datetime="2015-08-15">26 August 2015</time></span></h2>
  
   <div data-fill-with="spec-metadata">
    <dl>
     <dt>This version:
     <dd><a class="u-url" href="http://dev.w3.org/csswg/css3-zoom-mediaquery/">http://dev.w3.org/csswg/css3-zoom-mediaquery/</a>
     <dt>Feedback:
     <dd><span><a href="mailto:www-style@w3.org?subject=%5Bcss-mediaquery%5D%20YOUR%20TOPIC%20HERE">www-style@w3.org</a> with subject line “<kbd>[css-mediaquery] <var>… message topic …</var></kbd>” (<a href="http://lists.w3.org/Archives/Public/www-style/" rel="discussion">archives</a>)</span>
<!--
     <dt>Test Suite:
     <dd><a href="http://test.csswg.org/suites/css-zoom-mediaquery_dev/nightly-unstable/">http://test.csswg.org/suites/css-zoom-mediaquery_dev/nightly-unstable/</a>
     <dt>Issue Tracking:
-->
     <dd><a href="https://github.com/w3c/csswg-drafts/issues/">GitHub</a>
     <dd><a href="#issues-index">Inline In Spec</a>
     <dt class="editor">Editors:
     <dd class="editor p-author h-card vcard"><a class="p-name fn u-email email" href="mailto:sa-takagi@kddi.com">Satoru Takagi</a> (<a class="p-org org" href="http://www.kddi.com/">KDDI Corporation</a>)
    </dl>
   </div>
  
   <div data-fill-with="warning"></div>
  
   <p class="copyright" data-fill-with="copyright"><a href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © 2015 <a href="http://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup> (<a href="http://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>, <a href="http://www.ercim.eu/"><abbr title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>, <a href="http://www.keio.ac.jp/">Keio</a>, <a href="http://ev.buaa.edu.cn/">Beihang</a>). W3C <a href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>, <a href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and <a href="http://www.w3.org/Consortium/Legal/copyright-documents">document use</a> rules apply.
</p>
  
   <hr title="Separator for header">
</div>


  <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>

  <div class="p-summary" data-fill-with="abstract">
   <p><em>media queries</em> provides the query for the change of a style sheet or the control of resource loadings according to the condition of media feature.</p>

   <p>This specification extends some media features to media query reacted to zooming of a user agent or contents.</p>
   
   

 </div>


  <h2 class="no-num no-toc no-ref heading settled" id="status"><span class="content">Status of this document</span></h2>

  <div data-fill-with="status">
   <p>
	This is a public copy of the unofficial draft.
	It is provided for discussion only and may change at any moment.
	Its publication here does not imply endorsement of its contents by W3C.
	Don’t cite this document other than as work in progress.

</p>
   <p>
	The (<a href="http://lists.w3.org/Archives/Public/www-style/">archived</a>) public mailing list
	<a href="mailto:www-style@w3.org?Subject=%5Bcss-transforms%5D%20PUT%20SUBJECT%20HERE">www-style@w3.org</a>
	(see <a href="http://www.w3.org/Mail/Request">instructions</a>)
	is preferred for discussion of this specification.
	When sending e-mail,
	please put the text “css-transforms” in the subject,
	preferably like this:
	“[css-transforms] <em>…summary of comment…</em>”

</p>
   <p>
	This document was produced by the <a href="http://www.w3.org/Style/CSS/members">CSS Working Group</a>
	(part of the <a href="http://www.w3.org/Style/">Style Activity</a>).

</p>
   <p>
	This document was produced by a group operating under
	the <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/">5 February 2004 W3C Patent Policy</a>.
	W3C maintains a <a href="http://www.w3.org/2004/01/pp-impl/32061/status" rel="disclosure">public list of any patent disclosures</a>
	made in connection with the deliverables of the group;
	that page also includes instructions for disclosing a patent.
	An individual who has actual knowledge of a patent which the individual believes contains <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/#def-essential">Essential Claim(s)</a>
	must disclose the information in accordance with <a href="http://www.w3.org/Consortium/Patent-Policy-20040205/#sec-Disclosure">section 6 of the W3C Patent Policy</a>.

</p>
   <p>
	This document is governed by the <a href="http://www.w3.org/2014/Process-20140801/" id="w3c_process_revision">1 August 2014 W3C Process Document</a>.

</p>
   <p>
	
</p></div>

  <div data-fill-with="at-risk"></div>


  <h2 class="no-num no-toc no-ref heading settled" id="contents"><span class="content">Table of Contents</span></h2>

  <div data-fill-with="table-of-contents" role="navigation">
   <ul class="toc" role="directory">
    <li><a href="#intro"><span class="secno">1</span> <span class="content">Introduction</span></a>
    <li><a href="#usecase"><span class="secno">2</span> <span class="content">Use case</span></a>
    <li><a href="#diff-existing"><span class="secno">3</span> <span 
class="content">Difference between existing features and zoom features</span></a>
    <li><a href="#zooming-behaviors"><span class="secno">4</span> <span class="content">Possible zooming types</span></a>
    <ul class="toc">
     <li><a href="#embed-content-scale"><span class="secno">4.1</span> <span class="content">Scale of Embedded Content</span></a>
     <li><a href="#possible-zoom-listings"><span class="secno">4.2</span> <span class="content">Possible zoom listings</span></a>
    </ul>
    
    <li><a href="#zoom-media-features"><span class="secno">5</span> <span class="content">Zoom media features</span></a>
    <ul class="toc">
     <!--<li><a href="#zoom"><span class="secno">5.1</span><span class="content">zoom</span></a>-->
     <li><a href="#document-zoom"><span class="secno">5.1</span><span class="content">document-zoom</span></a>
    </ul>
    
    <li><a href="#acknowledgments"><span class="secno"></span> <span class="content">Acknowledgments</span></a>
    
    <li><a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ul class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
     </ul>
    <li><a href="#issues-index"><span class="secno"></span> <span class="content">Issues Index</span></a>
   </ul></div>

  <main>



   <h2 class="heading settled" data-level="1" id="intro"><span class="secno">1. </span><span class="content">Introduction</span><a class="self-link" href="#intro"></a></h2>


   <p>When scale of contents is changed by UA's zoom function or CSS3 Transforms, media query with zoom media features can provide the responsible contents concerning zooming. In addition to control of a style sheet, the application to elements which can have media attributes such as <a href="http://www.w3.org/html/wg/drafts/html/master/semantics.html#the-source-element-when-used-with-the-picture-element">source</a> element etc. is also taken into consideration. </p>

   <h2 class="heading settled" data-level="2" id="usecase"><span class="secno">2. </span><span class="content">Use case</span><a class="self-link" href="#usecase"></a></h2>
   <p><em>This section is non-normative.</em></p>
   <p>Interactive zooming function is essential for applications such as Mapping</a> and High-Resolution Photos which have interactive zooming functions.</p> 
　<p> The zoom functionality is implemented using a zoom function that is provided by UA natively-level or by application level. There are two types of UA-level zoom functions: 1) <a href="http://www.w3.org/TR/cssom-view/#zooming">page zoom</a> which takes into account the size of initial viewport, and 2) <a href="http://www.w3.org/TR/cssom-view/#zooming">pinch zoom</a> which acts like a magnifying glass that doesn't affect the viewport. On the other hand, application-level zoom function controls a scale of coordinates for contents.</p>
   
   <p>Moreover, contents provider may want to provide the most appropriate contents or styling according to zoom ratio changed by the user's zooming operation. Such functions are called <a href="https://en.wikipedia.org/wiki/Level_of_detail">'Level of Detail' (LoD)</a> and conventionally popular. LoD is effective functionarity not only to provide information interactively from overview to detail but also to control the distribution of the detailed large size data. It is convenient for content providers that UA has a function that  realizes LoD without massive JS apps.</p>
   <p>The function which controls styles and resources according to various environments surrounding contents is offered using css media query and picture element etc. It is considered that zoom shown here is also a kind of such environment. So, this specification prescribes a feature that control dynamic expression of content according to zoom by extending Media Queries.</p>

<div class="example" id="example-28baa0e2a"><a class="self-link" href="#example-28baa0e2"></a>
    This media query simply detects magnification (if this zoom ratio is at least 2.0):
   <pre>@media (zoom >= 2.0)</pre>
</div>

<div class="example" id="example-28baa0e2b"><a class="self-link" href="#example-28baa0e2"></a>
   For example, this media query expresses that a style sheet is usable when the zoom ratio is greater than 2.0:
   <pre>@media (min-zoom: 2.0) { ... }</pre>
</div>

<div class="example" id="example-28baa0e2c"><a class="self-link" href="#example-28baa0e2"></a>
   For example, this media query expresses that style sheets are switched according to zoom ratio. img element is displayed in the case of (1.0 <= zoom < 2.0), but img element is not displayed in the case of (2.0 <= zoom):
  <pre>
    &lt;html&gt;
      &lt;head&gt;
        &lt;style type="text/css"&gt;
          @media (min-zoom: 1.0) {
            .content {
              display: inline;
            }
          }
          @media (min-zoom: 2.0) {
            .content {
              display: none;
            }
          }
        &lt;/style&gt;
      &lt;/head&gt;
      &lt;body&gt;
        &lt;img class="content" src="sample.jpg"/&gt;
      &lt;/body&gt;
    &lt;/html&gt;
  </pre>
</div>

<div class="example" id="example-28baa0e2d"><a class="self-link" href="#example-28baa0e2"></a>
   This example shows zoom media query in picture element:
   <pre>&lt;picture&gt;
  &lt;source 
    media="(min-zoom: 4.0)"
    srcset="images/ultra-high-res-image.png"&gt;
  &lt;source 
    media="(min-zoom: 2.0)"
    srcset="images/high-res-image.png"&gt;
  &lt;img 
    src="images/normal-image.png" 
    alt="a zoomable image"&gt;
&lt;/picture&gt;</pre>
</div>

   <h2 class="heading settled" data-level="3" id="diff-existing"><span class="secno">3. </span><span class="content">Difference between existing features and zoom features</span><a class="self-link" href="#diff-existing"></a></h2>
   <p><em>This section is non-normative.</em></p>
<p><ul>
  <li>
   <a href=http://www.w3.org/TR/mediaqueries-4/#resolution> <code class="css">resolution</code> media features</a> 
  </li>
  <dl>
    <dd>
    resolution media feature takes into account the page zoom, but regards the pinch zoom as 1.0.
    </dd>
    <dd>
      <div class="example" id="example-7fbf34fb"><a class="self-link" href="#example-7fbf34fb"></a>
		This media query simply detects “high-resolution” screens
		(those with a hardware pixel to CSS <span class="css">px</span> ratio of at least 2):


    <pre>@media (resolution >= 2dppx)</pre>
    
	
   </div>
   </dd>
  </dl>
  <li>
    <a href=http://www.w3.org/TR/css-device-adapt/#the-lsquozoomrsquo-property> <code class="css">zoom</code> as viewport property</a>
  </li>
</div>
   <dl>
   <dd>
    This specifies only layout of content at initial status rather than expression according to interaction. And also, there are only mobile browsers supporting this, but no desktop browsers.
   </dd>
   <dd>
  <div class="example" id="example-28baa0e2"><a class="self-link" href="#example-28baa0e2"></a>
   <pre>
     This meta element: 
     
     &lt;meta name="viewport" content="initial-scale=1.0"&gt;
     
     Translate into: 
     
     @viewport {
       zoom: 1.0;
       width: auto;
     }
  </pre>
  </dd>    
   </dl>
</ul>

   <h2 class="heading settled" data-level="4" id="zooming-behaviors"><span class="secno">4. </span><span class="content">Possible zooming types </span><a class="self-link" href="#zooming-behaviors"></a></h2>

<p><em>This section is non normative.</em>
<p> This chapter organizes possible zooming patterns provided by UA and web contents. UA may have a native function for zooming such as page zoom and pinch zoom. Also, CSS pixel size may not be same as the size of device pixel (dot), as it may appear  as devicePixelRatio. Additionally, web contents may be sometimes nested with iframe element. The CSS pixel unit size in child document may differ from the CSS pixel unit size in parent document when CSS Transforms is applied to the contents in the documents. These parameters to change the size of contents are able to fall into the concept of "zoom".  The formula including these all parameters regarding zoom is indicated as below. This formula indicates relation between the dot size of device and the pixel size in the user coordinate of root element in the most descendant document.
</p>

<p>
<code>deviceDotSize = resolution[dppx] * PinchZoom * DocumentScale(root's child) * .... * DocumentScale(this) * contentSize</code>
</p>
<p>
<code>resolution[dppx] = nativeResolution * PageZoom</code>
</p>

<p>
	This picture shows the configuration of UA and its contents which the above-mentioned formula assumes. <br>
<img src="images/zoom1.png"/>
</p>


<p>
Each variable number is described as below. The variables are defined as scalar value.
</p>

<dl>
 <dt>resolution</dt>
 <dd>This is a value of <a href="http://www.w3.org/TR/css3-values/#resolution">resolution</a> with "dppx" prescribed in <a href="#biblio-css-values">[CSS3-VALUES]</a>. This value is same as <a href="https://drafts.csswg.org/cssom-view/#dom-window-devicepixelratio">devicePixelRatio</a> defined in <a href="#biblio-cssom-view">[CSSOM-VIEW]</a>.</dd>
 <dt>PageZoom</dt>
 <dd>This is a value of <a href="http://dev.w3.org/csswg/cssom-view/#zooming">page zoom</a> prescribed in <a href="#biblio-cssom-view">[CSSOM-VIEW]</a>
 <dt>PinchZoom</dt>
 <dd>This is a value of <a href="http://dev.w3.org/csswg/cssom-view/#zooming">pinch  zoom</a> prescribed in <a href="#biblio-cssom-view">[CSSOM-VIEW]</a>.
 <dt>DocumentScale</dt>
 <dd>This is a value of scale given by transform to child's content nested by an element for embedded content such as iframe (<a href="http://www.w3.org/TR/html5/embedded-content-0.html">HTMLEmbedded Content</a>, <a href="http://www.w3.org/TR/SVG2/embedded.html">SVG Embedded Content</a>), if contents targeted by media queries are nested with an embedded content element. Whole scale value is calculated by multiplying each scale in each nest.  Let DocumentScale(root's child) be a scale given by transform from a root document to a child document. Let DocumentScale(this) be a scale given by transform from a parent of the most descendant document (called this) to the most descendant document.
 </dd>
 
 <dt>nativeResolution</dt>
 <dd>This is a value of resolution in a condition in PageZoom of 1.0.</dd>
 
 <dt>deviceDotSize</dt>
 <dd>This is a value of size of device native pixel in 'dot' unit system.</dd>
 <dt>contentSize</dt>
 <dd>This is a value of size of CSS pixel in a content's coordinate system. This value is able to be scaled with transform function.</dd> 
</dl>

   <h3 class="heading settled" data-level="4.1" id="embed-content-scale"><span class="secno">4.1 </span><span class="content">Scale of Embedded Content</span><a class="self-link" href="#embed-content-scale"></a></h3>

<p> 
Transform matrix (<a href="#biblio-css-transforms">[CSS-TRANSFORMS]</a>) from parent's coorditnate system to child's coordinate system is given by <a href="http://www.w3.org/TR/css3-transforms/#current-transformation-matrix-ctm">CTM</a> of an embedded content element in parent content and implicit transformation in <a href="http://www.w3.org/TR/SVG2/coords.html#EstablishingANewSVGViewport">viewport establishment</a> process in <a href="#svg2">[SVG2]</a>. The value of <a href="http://svg2.mbsrv.net/devinfo/devstd/CSS_Transforms_Diff/css3Transforms_tmp/css-transforms-2_tmp/#scale">scale</a> (<a href="#biblio-css-transforms-2">[CSS-TRANSFORMS-2]</a>) is given by the transform matrix.
</p>
<p>
Transform property can be given to child elements of document's root element in HTML and SVG. 
However, DocumentScale is absolutely a value given by transform to parent document's root element. Because media qureies takes into account only external condition of the document, but not internal condition of the document.
</p>


<div class="example" id="example-28baa0e2"><a class="self-link" href="#example-28baa0e2"></a>
  The following parent iframe is displayed, even though min-zoom media feature of 2.0 is set and scale transform of 2.0 is applied to the parent iframe. On the other hand, the following child iframe is not displayed since the scale transform of 2.0 at the parent document affects to the zoom condition at the child document.
  <dt>parent.html</dt>
  <pre>
    &lt;html&gt;
      &lt;head&gt;
        &lt;style type="text/css"&gt;
          @media (min-zoom: 2.0) {
            .content {
              display: none;
            }
          }
          .content {
          	  transform: scale(2.0);
          }
        &lt;/style&gt;
      &lt;/head&gt;
      &lt;body&gt;
        &lt;iframe id="parent" class="content" src="child.html" /&gt;
      &lt;/body&gt;
    &lt;/html&gt;
  </pre>
  
  <dt>child.html</dt>
  <pre>
    &lt;html&gt;
      &lt;head&gt;
        &lt;style type="text/css"&gt;
          @media (min-zoom: 2.0) {
            .content {
              display: none;
            }
          }
        &lt;/style&gt;
      &lt;/head&gt;
      &lt;body&gt;
        &lt;iframe id="child" class="content" src="sample.jpg" /&gt;
      &lt;/body&gt;
    &lt;/html&gt;
  </pre>
</div>

   <h3 class="heading settled" data-level="4.2" id="possible-zoom-listings"><span class="secno">4.2 </span><span class="content">Possible zoom listings</span><a class="self-link" href="#possible-zoom-listings"></a></h3>

<table border=0 align="center" >
<tr>
  <th class="mqz_top">Device's dot size </th><th>=</th><th>resolution </th><th>* </th><th>PinchZoom </th><th>* </th><th>DocumentScale(root's child) </th><th>* .... * </th><th>DocumentScale(this) </th><th>* </th><th class="mqz_bottom">contentSize</th>
</tr>
<tr>
  <td class="mqz_top" colspan=3> Window's native CSS pxel size </td><td>= </td><td class="mqz_feature">'zoom' </td><td>* </td><td class="mqz_bottom" colspan=5>Root document's css pixel size</td>
</tr>
<tr>
  <td class="mqz_top">Device's dot size </td><td>=</td><td colspan=3 class="mqz_feature">'zoom-dot' </td><td>* </td><td class="mqz_bottom" colspan=5>Root document's css pixel size</td>
</tr>
<tr>
  <td class="mqz_top" colspan=3> Window's native CSS pxel size </td><td>= </td><td colspan=5 class="mqz_feature">'document-zoom' </td><td>* </td><td class="mqz_bottom">contentSize</td>
</tr>
<tr>
  <td class="mqz_top">Device's dot size </td><td>=</td><td colspan=7 class="mqz_feature">'document-zoom-dot' </td><td>* </td><td class="mqz_bottom">contentSize</td>
</tr>

<tr>
  <td class="mqz_top" colspan=5>Windows's CSS pixel size </td><td>=</td><td colspan=3 class="mqz_feature">'window-scale' </td><td>* </td><td class="mqz_bottom">contentSize</td>
</tr>

<tr>
  <td class="mqz_top" colspan=7>Parent's CSS pixel size </td><td>=</td><td class="mqz_feature">'document-scale' </td><td>* </td><td class="mqz_bottom">contentSize</td>
</tr>

</table>

<h4>Use cases of each zoom type</h4>
<dl>
<dt>'zoom' </dt>
<dd>The case that styles and contents are provided according to pinch zoom gesture using UA native functionality. </dd>
<dt>'zoom-dot'</dt>
<dd>The case that styles and contents are provided with reflecting the devicePixelRatio  of the device with such as Retina display in addition to 'zoom'. </dd>
<dt>'document-zoom'</dt>
<dd>The case that styles and contents are provided according to both scale of CSS Transforms on contents and pinch zoom provided by UA native functionality. However, resolution is not considered. Accordingly, this realizes the contents responded to both pinch zoom of UA, and transforms of web apps except for resolution. </dd>
<dd><p class="note" role="note">Note: stakagi: From the viewpoint of mapping use case, I think this "document-zoom" is better rather than "window-scale" because LoD works even by UA native pinch zoom.</p>
</dd>
<dt>'document-zoom-dot'</dt>
<dd>The case which responds also to resolution in addition to the above. It may be useful in order to realize the contents even responded to the resolution of a device and page zoom. </dd>
<dt>'window-scale'</dt>
<dd>The case that styles and contents are provided according to total scale of CSS Transforms on nested documents imported by iframe and img elements, but independing on pinch zoom provided by UA native functionalities. In conventional zoomable Web Apps, such a function is implemented mostly.</dd>

<dt>'document-scale'</dt>
<dd>Differ from the above, it is the case that styles and contents are provided according to the scale on the single hierarchy.</dd>
</dl>

   <h2 class="heading settled" data-level="5" id="zoom-media-features"><span class="secno">5. </span><span class="content">Zoom media features </span><a class="self-link" href="#zoom-media-features"></a></h2>
<p>
Zoom media features are prescribed as below based on the formula in a previous section. These features are specified by a single term or the combination of terms in the above formula. 
</p>
  <!--
  <h3 class="heading settled" data-level="5.1" id="zoom"><span class="secno">5.1 </span><span class="content">zoom</span><a class="self-link" href="#zoom"></a></h3>
   
  <div class="media-feature"><span class="label">Value:</span> <a href="http://www.w3.org/TR/css3-values/#percentage">&lt;percentage&gt;</a>,<a href="http://www.w3.org/TR/css3-values/#number-value">&lt;numnber&gt;</a><br>
   <span class="label">Applies to:</span> visual and tactile media types<br>
   <span class="label">Accepts min/max prefixes:</span> yes<br>
  </div>
  
  <p>The<code class="css">zoom</code> media feature corresponds to <a href="https://drafts.csswg.org/cssom-view/#zooming"><code>pinch zoom</code></a> described on <a href="#biblio-cssom-view">[CSSOM VIEW]</a>. (This naming of this feature is to ensure consitency with <a href="http://www.w3.org/TR/css-device-adapt/#the-lsquozoomrsquo-property"><code class="css">zoom</code></a> on [CSS-DEVICE-ADAPT].)
</p>

<div class="example" id="example-28baa0e2"><a class="self-link" href="#example-28baa0e2"></a>
For example, this media query expresses that a style sheet is usable when the zoom ratio based on <code>zoom</code> is greater than 2.0:
   <pre>@media (min-zoom: 2.0) { ... }</pre>
</div>
  -->
  <h3 class="heading settled" data-level="5.1" id="document-zoom"><span class="secno">5.1 </span><span class="content">document-zoom</span><a class="self-link" href="#document-zoom"></a></h3>

  <div class="media-feature"><span class="label">Value:</span> <a href="http://www.w3.org/TR/css3-values/#percentage">&lt;percentage&gt;</a>,<a href="http://www.w3.org/TR/css3-values/#number-value">&lt;number&gt;</a><br>
   <span class="label">Applies to:</span> visual and tactile media types<br>
   <span class="label">Accepts min/max prefixes:</span> yes<br>
  </div>
  <p>
  The 'document-zoom' media feature corresponds to <code> (PinchZoom * DocumentScale(root's child) * .... * DocumentScale(this))</code>. This means zooming to window of UA in CSS Pixel coordinates of document targetted by media queries.UA native pinch zooming is reflected to this features.
  </p>
  
<div class="example" id="example-28baa0e2"><a class="self-link" href="#example-28baa0e2"></a>
For example, this media query expresses that a style sheet is usable when the zoom ratio based on <code>document-zoom</code> is greater than 2.0:
   <pre>@media (min-document-zoom: 2.0) { ... }</pre>
</div>

<br><br>
<h2 class="no-num heading settled" id="acknowledgments"><span class="content">Acknowledgments</span><a class="self-link" href="#acknowledgments"></a></h2>

  <p>This specification is the product of the W3C Working Group on Cascading
   Style Sheets.</p>
   <p>We would like to sincerely thank Tomoaki Konno and Brian Birtles to acknowledge their contributions to this work.</p>

  <h2 class="no-num heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  
  <h3 class="no-num heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
  
   <dt id="biblio-cssom-view"><a class="self-link" href="#biblio-cssom-view"></a>[CSSOM-VIEW]
   <dd>CSSOM View Module 1 URL: <a href="http://www.w3.org/TR/cssom-view/">http://www.w3.org/TR/cssom-view/</a>
   
   <dt id="biblio-css-device-adapt"><a class="self-link" href="#biblio-css-device-adapt"></a>[CSS-DEVICE-ADAPT]
   <dd>CSS Device Adaptation URL: <a href="http://www.w3.org/TR/css-device-adapt/">http://www.w3.org/TR/css-device-adapt/</a>
   
   <dt id="biblio-media-queries"><a class="self-link" href="#biblio-media-queries"></a>[MEDIA-QUERIES]
   <dd>Media Queries URL: <a href="http://www.w3.org/TR/css3-mediaqueries/">http://www.w3.org/TR/css3-mediaqueries/</a>
   
   <dt id="biblio-css-values"><a class="self-link" href="#biblio-css-values"></a>[CSS-VALUES]
   <dd>CSS Values and Units Module Level 3 URL: <a href="http://www.w3.org/TR/css3-values/">http://www.w3.org/TR/css3-values/</a>
   
   <dt id="biblio-css-transforms"><a class="self-link" href="#biblio-css-transforms"></a>[CSS-TRANSFORMS]
   <dd>CSS Transforms Module Level 1 URL: <a href="http://www.w3.org/TR/css3-transforms/">http://www.w3.org/TR/css3-transforms/</a>
   
   <dt id="biblio-svg2"><a class="self-link" href="#biblio-svg2"></a>[SVG2]
   <dd>Scalable Vector Graphics (SVG) 2 URL: <a href="http://www.w3.org/TR/SVG2/">http://www.w3.org/TR/SVG2/</a>
   
   <dt id="biblio-css-transforms-2"><a class="self-link" href="#biblio-css-transforms-2"></a>[CSS-TRANSFORMS-2]
   <dd>CSS Transforms Module Level 2 URL: <a href="http://svg2.mbsrv.net/devinfo/devstd/CSS_Transforms_Diff/css3Transforms_tmp/css-transforms-2_tmp/">http://svg2.mbsrv.net/devinfo/devstd/CSS_Transforms_Diff/css3Transforms_tmp/css-transforms-2_tmp/</a>
  
   
  </dl>

  <h2 class="no-num heading settled" id="issues-index"><span class="content">Issues Index</span><a class="self-link" href="#issues-index"></a></h2>
  <div style="counter-reset:issue">
   <div class="issue">Isn't there any feature more than needed?</div>

   <div class="issue">The translation into English from Japanese is required.</div>
   <div class="issue">The review for checking errors of terminological definitions and interpretation of concepts is required. </div>
   <div class="issue">Is it nice as devicePixelRatio to <a href="http://www.w3.org/TR/cssom-view/#dom-window-devicepixelratio">take the smaller value</a> of the values of height and width?  It may also be appropriate to use sqrt (w * h). </div>
   <div class="issue">It seems that the term is not unified within [CSS-DEVOCE-ADAPT] and [CSSOM VIEW].  'zoom' in [CSS-DEVOCE-ADAPT] corresponds to 'pinch zoom' in [CSSOM VIEW]. </div>
   <div class="note">Is resolution in dppx devicePixelRatio? If so, shoud be link them in appropriate specs.</div>

  </div>
  
  <a class='success' href='/csswg/bikeshed/css-transforms-2/' id='bikeshed' title='Bikeshed Succeeded'><svg height='24' viewbox='0 0 100 100' width='24'><g stroke="blue" stroke-width="6" fill="none"><path fill="blue" stroke="none" d="M 5 95 L 5 35 L 50 10 L 50 95"/><path ad="M 1 37 L 54 8"/><path fill="blue" stroke="none" d="M 1 40 v -6 l 60 -32 v 6 z" /><circle cx="75" cy="79" r="15" /><circle fill="blue" stroke="none" cx="75" cy="79" r="4" /><path d="M 75 79 L 65 49 L 55 49" /><path d="M 67 55 L 48 69" /></g></svg></a></body>
</html>
